ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sd.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.xchg_byte,"ax",%progbits
  18              		.align	1
  19              		.global	xchg_byte
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	xchg_byte:
  27              	.LVL0:
  28              	.LFB132:
  29              		.file 1 "Core/Src/sd.c"
   1:Core/Src/sd.c **** #include "sd.h"
   2:Core/Src/sd.c **** 
   3:Core/Src/sd.c **** /* MMC/SD command */
   4:Core/Src/sd.c **** #define CMD0 (0)           /* GO_IDLE_STATE */
   5:Core/Src/sd.c **** #define CMD1 (1)           /* SEND_OP_COND (MMC) */
   6:Core/Src/sd.c **** #define ACMD41 (0x80 + 41) /* SEND_OP_COND (SDC) */
   7:Core/Src/sd.c **** #define CMD8 (8)           /* SEND_IF_COND */
   8:Core/Src/sd.c **** #define CMD9 (9)           /* SEND_CSD */
   9:Core/Src/sd.c **** #define CMD10 (10)         /* SEND_CID */
  10:Core/Src/sd.c **** #define CMD12 (12)         /* STOP_TRANSMISSION */
  11:Core/Src/sd.c **** #define CMD13 (13)
  12:Core/Src/sd.c **** #define ACMD13 (0x80 + 13) /* SD_STATUS (SDC) */
  13:Core/Src/sd.c **** #define CMD16 (16)         /* SET_BLOCKLEN */
  14:Core/Src/sd.c **** #define CMD17 (17)         /* READ_SINGLE_BLOCK */
  15:Core/Src/sd.c **** #define CMD18 (18)         /* READ_MULTIPLE_BLOCK */
  16:Core/Src/sd.c **** #define CMD23 (23)         /* SET_BLOCK_COUNT (MMC) */
  17:Core/Src/sd.c **** #define ACMD23 (0x80 + 23) /* SET_WR_BLK_ERASE_COUNT (SDC) */
  18:Core/Src/sd.c **** #define CMD24 (24)         /* WRITE_BLOCK */
  19:Core/Src/sd.c **** #define CMD25 (25)         /* WRITE_MULTIPLE_BLOCK */
  20:Core/Src/sd.c **** #define CMD32 (32)         /* ERASE_ER_BLK_START */
  21:Core/Src/sd.c **** #define CMD33 (33)         /* ERASE_ER_BLK_END */
  22:Core/Src/sd.c **** #define CMD38 (38)         /* ERASE */
  23:Core/Src/sd.c **** #define CMD55 (55)         /* APP_CMD */
  24:Core/Src/sd.c **** #define CMD58 (58)         /* READ_OCR */
  25:Core/Src/sd.c **** 
  26:Core/Src/sd.c **** /*Fetch SPI_CS_PIN high or low*/
  27:Core/Src/sd.c **** #define CS_HIGH()                                                    \
  28:Core/Src/sd.c ****     {                                                                \
  29:Core/Src/sd.c ****         HAL_GPIO_WritePin(SD_CS_GPIO_PORT, SD_CS_PIN, GPIO_PIN_SET); \
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 2


  30:Core/Src/sd.c ****     }
  31:Core/Src/sd.c **** #define CS_LOW()                                                       \
  32:Core/Src/sd.c ****     {                                                                  \
  33:Core/Src/sd.c ****         HAL_GPIO_WritePin(SD_CS_GPIO_PORT, SD_CS_PIN, GPIO_PIN_RESET); \
  34:Core/Src/sd.c ****     }
  35:Core/Src/sd.c **** //(Note that the _256 is used as a mask to clear the prescalar bits as it provides binary 111 in th
  36:Core/Src/sd.c **** #define FCLK_SLOW()                                                                                
  37:Core/Src/sd.c ****     {                                                                                              
  38:Core/Src/sd.c ****         MODIFY_REG(SD_SPI_HANDLE.Instance->CR1, SPI_BAUDRATEPRESCALER_256, SPI_BAUDRATEPRESCALER_12
  39:Core/Src/sd.c ****     } /* Set SCLK = slow, approx 280 KBits/s*/
  40:Core/Src/sd.c **** #define FCLK_FAST()                                                                                
  41:Core/Src/sd.c ****     {                                                                                              
  42:Core/Src/sd.c ****         MODIFY_REG(SD_SPI_HANDLE.Instance->CR1, SPI_BAUDRATEPRESCALER_256, SPI_BAUDRATEPRESCALER_8)
  43:Core/Src/sd.c ****     } /* Set SCLK = fast, approx 4.5 MBits/s */
  44:Core/Src/sd.c **** 
  45:Core/Src/sd.c **** /*Exchange a single byte through spi communication */
  46:Core/Src/sd.c **** UINT8 xchg_byte(UINT8 xmitData)
  47:Core/Src/sd.c **** {
  30              		.loc 1 47 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 16
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 47 1 is_stmt 0 view .LVU1
  35 0000 00B5     		push	{lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 4
  38              		.cfi_offset 14, -4
  39 0002 87B0     		sub	sp, sp, #28
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 32
  42 0004 8DF80F00 		strb	r0, [sp, #15]
  48:Core/Src/sd.c ****     UINT8 rcvData;
  43              		.loc 1 48 5 is_stmt 1 view .LVU2
  49:Core/Src/sd.c ****     rcvData = HAL_SPI_TransmitReceive(&SD_SPI_HANDLE, &xmitData, &rcvData, 1, 50);
  44              		.loc 1 49 5 view .LVU3
  45              		.loc 1 49 15 is_stmt 0 view .LVU4
  46 0008 3223     		movs	r3, #50
  47 000a 0093     		str	r3, [sp]
  48 000c 0123     		movs	r3, #1
  49 000e 0DF11702 		add	r2, sp, #23
  50 0012 0DF10F01 		add	r1, sp, #15
  51 0016 0448     		ldr	r0, .L3
  52              	.LVL1:
  53              		.loc 1 49 15 view .LVU5
  54 0018 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
  55              	.LVL2:
  56              		.loc 1 49 13 view .LVU6
  57 001c 8DF81700 		strb	r0, [sp, #23]
  50:Core/Src/sd.c ****     return rcvData;
  58              		.loc 1 50 5 is_stmt 1 view .LVU7
  51:Core/Src/sd.c **** }
  59              		.loc 1 51 1 is_stmt 0 view .LVU8
  60 0020 07B0     		add	sp, sp, #28
  61              	.LCFI2:
  62              		.cfi_def_cfa_offset 4
  63              		@ sp needed
  64 0022 5DF804FB 		ldr	pc, [sp], #4
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 3


  65              	.L4:
  66 0026 00BF     		.align	2
  67              	.L3:
  68 0028 00000000 		.word	hspi2
  69              		.cfi_endproc
  70              	.LFE132:
  72              		.section	.text.sd_wait_ready,"ax",%progbits
  73              		.align	1
  74              		.global	sd_wait_ready
  75              		.syntax unified
  76              		.thumb
  77              		.thumb_func
  78              		.fpu fpv4-sp-d16
  80              	sd_wait_ready:
  81              	.LFB133:
  52:Core/Src/sd.c **** 
  53:Core/Src/sd.c **** /*Wait until the sd card is ready or timeout*/
  54:Core/Src/sd.c **** UINT8 sd_wait_ready(void)
  55:Core/Src/sd.c **** {
  82              		.loc 1 55 1 is_stmt 1 view -0
  83              		.cfi_startproc
  84              		@ args = 0, pretend = 0, frame = 0
  85              		@ frame_needed = 0, uses_anonymous_args = 0
  86 0000 10B5     		push	{r4, lr}
  87              	.LCFI3:
  88              		.cfi_def_cfa_offset 8
  89              		.cfi_offset 4, -8
  90              		.cfi_offset 14, -4
  56:Core/Src/sd.c ****     UINT16 timeout = 0xFFF;
  91              		.loc 1 56 5 view .LVU10
  92              	.LVL3:
  93              		.loc 1 56 12 is_stmt 0 view .LVU11
  94 0002 40F6FF74 		movw	r4, #4095
  95              	.LVL4:
  96              	.L7:
  57:Core/Src/sd.c ****     UINT8 data;
  97              		.loc 1 57 5 is_stmt 1 discriminator 2 view .LVU12
  58:Core/Src/sd.c ****     do
  98              		.loc 1 58 5 discriminator 2 view .LVU13
  59:Core/Src/sd.c ****     {
  60:Core/Src/sd.c ****         data = xchg_byte(SD_DUMMY_BYTE);
  99              		.loc 1 60 9 discriminator 2 view .LVU14
 100              		.loc 1 60 16 is_stmt 0 discriminator 2 view .LVU15
 101 0006 FF20     		movs	r0, #255
 102 0008 FFF7FEFF 		bl	xchg_byte
 103              	.LVL5:
  61:Core/Src/sd.c ****     } while (data != 0xFF && --timeout);
 104              		.loc 1 61 13 is_stmt 1 discriminator 2 view .LVU16
 105              		.loc 1 61 5 is_stmt 0 discriminator 2 view .LVU17
 106 000c FF28     		cmp	r0, #255
 107 000e 03D0     		beq	.L6
 108              		.loc 1 61 27 discriminator 1 view .LVU18
 109 0010 013C     		subs	r4, r4, #1
 110              	.LVL6:
 111              		.loc 1 61 27 discriminator 1 view .LVU19
 112 0012 A4B2     		uxth	r4, r4
 113              	.LVL7:
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 4


 114              		.loc 1 61 27 discriminator 1 view .LVU20
 115 0014 002C     		cmp	r4, #0
 116 0016 F6D1     		bne	.L7
 117              	.L6:
  62:Core/Src/sd.c ****     return (data == 0xFF) ? 1 : 0;
 118              		.loc 1 62 5 is_stmt 1 view .LVU21
  63:Core/Src/sd.c **** }
 119              		.loc 1 63 1 is_stmt 0 view .LVU22
 120 0018 FF28     		cmp	r0, #255
 121 001a 14BF     		ite	ne
 122 001c 0020     		movne	r0, #0
 123              	.LVL8:
 124              		.loc 1 63 1 view .LVU23
 125 001e 0120     		moveq	r0, #1
 126 0020 10BD     		pop	{r4, pc}
 127              		.loc 1 63 1 view .LVU24
 128              		.cfi_endproc
 129              	.LFE133:
 131              		.section	.text.sd_deselect,"ax",%progbits
 132              		.align	1
 133              		.global	sd_deselect
 134              		.syntax unified
 135              		.thumb
 136              		.thumb_func
 137              		.fpu fpv4-sp-d16
 139              	sd_deselect:
 140              	.LFB134:
  64:Core/Src/sd.c **** 
  65:Core/Src/sd.c **** /*inactivate spi communication*/
  66:Core/Src/sd.c **** void sd_deselect(void)
  67:Core/Src/sd.c **** {
 141              		.loc 1 67 1 is_stmt 1 view -0
 142              		.cfi_startproc
 143              		@ args = 0, pretend = 0, frame = 0
 144              		@ frame_needed = 0, uses_anonymous_args = 0
 145 0000 08B5     		push	{r3, lr}
 146              	.LCFI4:
 147              		.cfi_def_cfa_offset 8
 148              		.cfi_offset 3, -8
 149              		.cfi_offset 14, -4
  68:Core/Src/sd.c ****     CS_HIGH();
 150              		.loc 1 68 5 view .LVU26
 151 0002 0122     		movs	r2, #1
 152 0004 4FF48051 		mov	r1, #4096
 153 0008 0348     		ldr	r0, .L11
 154 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 155              	.LVL9:
 156              		.loc 1 68 14 view .LVU27
  69:Core/Src/sd.c ****     xchg_byte(SD_DUMMY_BYTE);
 157              		.loc 1 69 5 view .LVU28
 158 000e FF20     		movs	r0, #255
 159 0010 FFF7FEFF 		bl	xchg_byte
 160              	.LVL10:
  70:Core/Src/sd.c **** }
 161              		.loc 1 70 1 is_stmt 0 view .LVU29
 162 0014 08BD     		pop	{r3, pc}
 163              	.L12:
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 5


 164 0016 00BF     		.align	2
 165              	.L11:
 166 0018 00040048 		.word	1207960576
 167              		.cfi_endproc
 168              	.LFE134:
 170              		.section	.text.sd_select,"ax",%progbits
 171              		.align	1
 172              		.global	sd_select
 173              		.syntax unified
 174              		.thumb
 175              		.thumb_func
 176              		.fpu fpv4-sp-d16
 178              	sd_select:
 179              	.LFB135:
  71:Core/Src/sd.c **** /*activate spi communication*/
  72:Core/Src/sd.c **** UINT8 sd_select(void)
  73:Core/Src/sd.c **** {
 180              		.loc 1 73 1 is_stmt 1 view -0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184 0000 10B5     		push	{r4, lr}
 185              	.LCFI5:
 186              		.cfi_def_cfa_offset 8
 187              		.cfi_offset 4, -8
 188              		.cfi_offset 14, -4
  74:Core/Src/sd.c ****     /*pull down the CS to select the sd card*/
  75:Core/Src/sd.c ****     CS_LOW();
 189              		.loc 1 75 5 view .LVU31
 190 0002 0022     		movs	r2, #0
 191 0004 4FF48051 		mov	r1, #4096
 192 0008 0748     		ldr	r0, .L18
 193 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 194              	.LVL11:
 195              		.loc 1 75 13 view .LVU32
  76:Core/Src/sd.c ****     xchg_byte(SD_DUMMY_BYTE);
 196              		.loc 1 76 5 view .LVU33
 197 000e FF20     		movs	r0, #255
 198 0010 FFF7FEFF 		bl	xchg_byte
 199              	.LVL12:
  77:Core/Src/sd.c ****     if (sd_wait_ready())
 200              		.loc 1 77 5 view .LVU34
 201              		.loc 1 77 9 is_stmt 0 view .LVU35
 202 0014 FFF7FEFF 		bl	sd_wait_ready
 203              	.LVL13:
 204              		.loc 1 77 8 view .LVU36
 205 0018 10B1     		cbz	r0, .L17
  78:Core/Src/sd.c ****     {
  79:Core/Src/sd.c ****         return 1;
 206              		.loc 1 79 16 view .LVU37
 207 001a 0124     		movs	r4, #1
 208              	.L14:
  80:Core/Src/sd.c ****     }
  81:Core/Src/sd.c ****     else
  82:Core/Src/sd.c ****     {
  83:Core/Src/sd.c ****         /*select fail with no valid wait-ready response*/
  84:Core/Src/sd.c ****         sd_deselect();
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 6


  85:Core/Src/sd.c ****         return 0;
  86:Core/Src/sd.c ****     }
  87:Core/Src/sd.c **** }
 209              		.loc 1 87 1 view .LVU38
 210 001c 2046     		mov	r0, r4
 211 001e 10BD     		pop	{r4, pc}
 212              	.L17:
 213 0020 0446     		mov	r4, r0
  84:Core/Src/sd.c ****         return 0;
 214              		.loc 1 84 9 is_stmt 1 view .LVU39
 215 0022 FFF7FEFF 		bl	sd_deselect
 216              	.LVL14:
  85:Core/Src/sd.c ****     }
 217              		.loc 1 85 9 view .LVU40
  85:Core/Src/sd.c ****     }
 218              		.loc 1 85 16 is_stmt 0 view .LVU41
 219 0026 F9E7     		b	.L14
 220              	.L19:
 221              		.align	2
 222              	.L18:
 223 0028 00040048 		.word	1207960576
 224              		.cfi_endproc
 225              	.LFE135:
 227              		.section	.text.send_cmd,"ax",%progbits
 228              		.align	1
 229              		.syntax unified
 230              		.thumb
 231              		.thumb_func
 232              		.fpu fpv4-sp-d16
 234              	send_cmd:
 235              	.LVL15:
 236              	.LFB136:
  88:Core/Src/sd.c **** 
  89:Core/Src/sd.c **** /*return command response token*/
  90:Core/Src/sd.c **** static UINT8 send_cmd(UINT8 cmd, UINT32 arg)
  91:Core/Src/sd.c **** {
 237              		.loc 1 91 1 is_stmt 1 view -0
 238              		.cfi_startproc
 239              		@ args = 0, pretend = 0, frame = 0
 240              		@ frame_needed = 0, uses_anonymous_args = 0
 241              		.loc 1 91 1 is_stmt 0 view .LVU43
 242 0000 38B5     		push	{r3, r4, r5, lr}
 243              	.LCFI6:
 244              		.cfi_def_cfa_offset 16
 245              		.cfi_offset 3, -16
 246              		.cfi_offset 4, -12
 247              		.cfi_offset 5, -8
 248              		.cfi_offset 14, -4
 249 0002 0446     		mov	r4, r0
 250 0004 0D46     		mov	r5, r1
  92:Core/Src/sd.c ****     UINT8 res;
 251              		.loc 1 92 5 is_stmt 1 view .LVU44
  93:Core/Src/sd.c ****     UINT8 crc;
 252              		.loc 1 93 5 view .LVU45
  94:Core/Src/sd.c ****     if (cmd & 0x80)
 253              		.loc 1 94 5 view .LVU46
 254              		.loc 1 94 8 is_stmt 0 view .LVU47
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 7


 255 0006 10F0800F 		tst	r0, #128
 256 000a 28D1     		bne	.L29
 257              	.LVL16:
 258              	.L21:
  95:Core/Src/sd.c ****     {
  96:Core/Src/sd.c ****         /*ACMD commands*/
  97:Core/Src/sd.c ****         cmd &= 0x7F;
  98:Core/Src/sd.c ****         res = send_cmd(CMD55, 0);
  99:Core/Src/sd.c ****         if (res > 1)
 100:Core/Src/sd.c ****         {
 101:Core/Src/sd.c ****             /*Illegal command response not 0*/
 102:Core/Src/sd.c ****             return (UINT8)res;
 103:Core/Src/sd.c ****         }
 104:Core/Src/sd.c ****     }
 105:Core/Src/sd.c **** 
 106:Core/Src/sd.c ****     /*reset communication status*/
 107:Core/Src/sd.c ****     sd_deselect();
 259              		.loc 1 107 5 is_stmt 1 view .LVU48
 260 000c FFF7FEFF 		bl	sd_deselect
 261              	.LVL17:
 108:Core/Src/sd.c ****     if (!sd_select())
 262              		.loc 1 108 5 view .LVU49
 263              		.loc 1 108 10 is_stmt 0 view .LVU50
 264 0010 FFF7FEFF 		bl	sd_select
 265              	.LVL18:
 266              		.loc 1 108 8 view .LVU51
 267 0014 80B3     		cbz	r0, .L25
 109:Core/Src/sd.c ****     {
 110:Core/Src/sd.c ****         /*Select fail*/
 111:Core/Src/sd.c ****         return WAITING_NO_RESPONSE;
 112:Core/Src/sd.c ****     }
 113:Core/Src/sd.c **** 
 114:Core/Src/sd.c ****     /*Send command packet*/
 115:Core/Src/sd.c ****     xchg_byte(0x40 | cmd);
 268              		.loc 1 115 5 is_stmt 1 view .LVU52
 269 0016 44F04000 		orr	r0, r4, #64
 270 001a FFF7FEFF 		bl	xchg_byte
 271              	.LVL19:
 116:Core/Src/sd.c ****     xchg_byte((UINT8)(arg >> 24));
 272              		.loc 1 116 5 view .LVU53
 273 001e 280E     		lsrs	r0, r5, #24
 274 0020 FFF7FEFF 		bl	xchg_byte
 275              	.LVL20:
 117:Core/Src/sd.c ****     xchg_byte((UINT8)(arg >> 16));
 276              		.loc 1 117 5 view .LVU54
 277 0024 C5F30740 		ubfx	r0, r5, #16, #8
 278 0028 FFF7FEFF 		bl	xchg_byte
 279              	.LVL21:
 118:Core/Src/sd.c ****     xchg_byte((UINT8)(arg >> 8));
 280              		.loc 1 118 5 view .LVU55
 281 002c C5F30720 		ubfx	r0, r5, #8, #8
 282 0030 FFF7FEFF 		bl	xchg_byte
 283              	.LVL22:
 119:Core/Src/sd.c ****     xchg_byte((UINT8)arg);
 284              		.loc 1 119 5 view .LVU56
 285 0034 E8B2     		uxtb	r0, r5
 286 0036 FFF7FEFF 		bl	xchg_byte
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 8


 287              	.LVL23:
 120:Core/Src/sd.c **** 
 121:Core/Src/sd.c ****     /*crc + stop byte*/
 122:Core/Src/sd.c ****     switch (cmd)
 288              		.loc 1 122 5 view .LVU57
 289 003a CCB1     		cbz	r4, .L26
 290 003c 082C     		cmp	r4, #8
 291 003e 19D1     		bne	.L27
 123:Core/Src/sd.c ****     {
 124:Core/Src/sd.c ****     case CMD0:
 125:Core/Src/sd.c ****         crc = (UINT8)0x95;
 126:Core/Src/sd.c ****         break;
 127:Core/Src/sd.c ****     case CMD8:
 128:Core/Src/sd.c ****         crc = (UINT8)0x87;
 292              		.loc 1 128 13 is_stmt 0 view .LVU58
 293 0040 8720     		movs	r0, #135
 294              	.L23:
 295              	.LVL24:
 129:Core/Src/sd.c ****         break;
 130:Core/Src/sd.c ****     /*dummy crc + stop byte*/
 131:Core/Src/sd.c ****     default:
 132:Core/Src/sd.c ****         crc = (UINT8)0x01;
 133:Core/Src/sd.c ****     }
 134:Core/Src/sd.c ****     /*send crc + stop byte*/
 135:Core/Src/sd.c ****     xchg_byte(crc);
 296              		.loc 1 135 5 is_stmt 1 view .LVU59
 297 0042 FFF7FEFF 		bl	xchg_byte
 298              	.LVL25:
 136:Core/Src/sd.c **** 
 137:Core/Src/sd.c ****     /*recieve  R1 response*/
 138:Core/Src/sd.c ****     UINT8 cnt;
 299              		.loc 1 138 5 view .LVU60
 139:Core/Src/sd.c ****     cnt = 10;
 300              		.loc 1 139 5 view .LVU61
 301              		.loc 1 139 9 is_stmt 0 view .LVU62
 302 0046 0A24     		movs	r4, #10
 303              	.LVL26:
 304              	.L24:
 140:Core/Src/sd.c ****     do
 305              		.loc 1 140 5 is_stmt 1 discriminator 2 view .LVU63
 141:Core/Src/sd.c ****     {
 142:Core/Src/sd.c ****         /*wait for response by sending dummy byte*/
 143:Core/Src/sd.c ****         res = xchg_byte(SD_DUMMY_BYTE);
 306              		.loc 1 143 9 discriminator 2 view .LVU64
 307              		.loc 1 143 15 is_stmt 0 discriminator 2 view .LVU65
 308 0048 FF20     		movs	r0, #255
 309 004a FFF7FEFF 		bl	xchg_byte
 310              	.LVL27:
 144:Core/Src/sd.c ****         /*The left bit(MSB) of R1 response is always 0*/
 145:Core/Src/sd.c ****     } while ((res & (UINT8)0x80) && --cnt);
 311              		.loc 1 145 13 is_stmt 1 discriminator 2 view .LVU66
 312              		.loc 1 145 5 is_stmt 0 discriminator 2 view .LVU67
 313 004e 10F0800F 		tst	r0, #128
 314 0052 03D0     		beq	.L22
 315              		.loc 1 145 34 discriminator 1 view .LVU68
 316 0054 631E     		subs	r3, r4, #1
 317              	.LVL28:
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 9


 318              		.loc 1 145 34 discriminator 1 view .LVU69
 319 0056 13F0FF04 		ands	r4, r3, #255
 320 005a F5D1     		bne	.L24
 321              	.LVL29:
 322              	.L22:
 146:Core/Src/sd.c **** 
 147:Core/Src/sd.c ****     return res;
 148:Core/Src/sd.c **** }
 323              		.loc 1 148 1 view .LVU70
 324 005c 38BD     		pop	{r3, r4, r5, pc}
 325              	.LVL30:
 326              	.L29:
  97:Core/Src/sd.c ****         res = send_cmd(CMD55, 0);
 327              		.loc 1 97 9 is_stmt 1 view .LVU71
  97:Core/Src/sd.c ****         res = send_cmd(CMD55, 0);
 328              		.loc 1 97 13 is_stmt 0 view .LVU72
 329 005e 00F07F04 		and	r4, r0, #127
 330              	.LVL31:
  98:Core/Src/sd.c ****         if (res > 1)
 331              		.loc 1 98 9 is_stmt 1 view .LVU73
  98:Core/Src/sd.c ****         if (res > 1)
 332              		.loc 1 98 15 is_stmt 0 view .LVU74
 333 0062 0021     		movs	r1, #0
 334              	.LVL32:
  98:Core/Src/sd.c ****         if (res > 1)
 335              		.loc 1 98 15 view .LVU75
 336 0064 3720     		movs	r0, #55
 337 0066 FFF7CBFF 		bl	send_cmd
 338              	.LVL33:
  99:Core/Src/sd.c ****         {
 339              		.loc 1 99 9 is_stmt 1 view .LVU76
  99:Core/Src/sd.c ****         {
 340              		.loc 1 99 12 is_stmt 0 view .LVU77
 341 006a 0128     		cmp	r0, #1
 342 006c CED9     		bls	.L21
 343 006e F5E7     		b	.L22
 344              	.LVL34:
 345              	.L26:
 122:Core/Src/sd.c ****     {
 346              		.loc 1 122 5 view .LVU78
 347 0070 9520     		movs	r0, #149
 348 0072 E6E7     		b	.L23
 349              	.L27:
 132:Core/Src/sd.c ****     }
 350              		.loc 1 132 13 view .LVU79
 351 0074 0120     		movs	r0, #1
 352 0076 E4E7     		b	.L23
 353              	.L25:
 111:Core/Src/sd.c ****     }
 354              		.loc 1 111 16 view .LVU80
 355 0078 8020     		movs	r0, #128
 356 007a EFE7     		b	.L22
 357              		.cfi_endproc
 358              	.LFE136:
 360              		.section	.text.SD_GoIdleState,"ax",%progbits
 361              		.align	1
 362              		.global	SD_GoIdleState
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 10


 363              		.syntax unified
 364              		.thumb
 365              		.thumb_func
 366              		.fpu fpv4-sp-d16
 368              	SD_GoIdleState:
 369              	.LFB137:
 149:Core/Src/sd.c **** 
 150:Core/Src/sd.c **** UINT8 SD_GoIdleState(void)
 151:Core/Src/sd.c **** {
 370              		.loc 1 151 1 is_stmt 1 view -0
 371              		.cfi_startproc
 372              		@ args = 0, pretend = 0, frame = 0
 373              		@ frame_needed = 0, uses_anonymous_args = 0
 374 0000 10B5     		push	{r4, lr}
 375              	.LCFI7:
 376              		.cfi_def_cfa_offset 8
 377              		.cfi_offset 4, -8
 378              		.cfi_offset 14, -4
 152:Core/Src/sd.c ****     UINT8 res;
 379              		.loc 1 152 5 view .LVU82
 153:Core/Src/sd.c ****     /*Pull down the CS voltage*/
 154:Core/Src/sd.c ****     res = send_cmd(CMD0, 0);
 380              		.loc 1 154 5 view .LVU83
 381              		.loc 1 154 11 is_stmt 0 view .LVU84
 382 0002 0021     		movs	r1, #0
 383 0004 0846     		mov	r0, r1
 384 0006 FFF7FEFF 		bl	send_cmd
 385              	.LVL35:
 386 000a 0446     		mov	r4, r0
 387              	.LVL36:
 155:Core/Src/sd.c ****     /*R1 response in idle state*/
 156:Core/Src/sd.c ****     if (res == IDLE_STATE)
 388              		.loc 1 156 5 is_stmt 1 view .LVU85
 389              		.loc 1 156 8 is_stmt 0 view .LVU86
 390 000c 0128     		cmp	r0, #1
 391 000e 01D0     		beq	.L33
 392              	.LVL37:
 393              	.L31:
 157:Core/Src/sd.c ****     {
 158:Core/Src/sd.c ****         CS_HIGH();
 159:Core/Src/sd.c ****         xchg_byte(SD_DUMMY_BYTE);
 160:Core/Src/sd.c ****     }
 161:Core/Src/sd.c ****     return res;
 394              		.loc 1 161 5 is_stmt 1 view .LVU87
 162:Core/Src/sd.c **** }
 395              		.loc 1 162 1 is_stmt 0 view .LVU88
 396 0010 2046     		mov	r0, r4
 397 0012 10BD     		pop	{r4, pc}
 398              	.LVL38:
 399              	.L33:
 158:Core/Src/sd.c ****         xchg_byte(SD_DUMMY_BYTE);
 400              		.loc 1 158 9 is_stmt 1 view .LVU89
 401 0014 0122     		movs	r2, #1
 402 0016 4FF48051 		mov	r1, #4096
 403 001a 0348     		ldr	r0, .L34
 404              	.LVL39:
 158:Core/Src/sd.c ****         xchg_byte(SD_DUMMY_BYTE);
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 11


 405              		.loc 1 158 9 is_stmt 0 view .LVU90
 406 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 407              	.LVL40:
 158:Core/Src/sd.c ****         xchg_byte(SD_DUMMY_BYTE);
 408              		.loc 1 158 18 is_stmt 1 view .LVU91
 159:Core/Src/sd.c ****     }
 409              		.loc 1 159 9 view .LVU92
 410 0020 FF20     		movs	r0, #255
 411 0022 FFF7FEFF 		bl	xchg_byte
 412              	.LVL41:
 413 0026 F3E7     		b	.L31
 414              	.L35:
 415              		.align	2
 416              	.L34:
 417 0028 00040048 		.word	1207960576
 418              		.cfi_endproc
 419              	.LFE137:
 421              		.section	.text.SD_Init,"ax",%progbits
 422              		.align	1
 423              		.global	SD_Init
 424              		.syntax unified
 425              		.thumb
 426              		.thumb_func
 427              		.fpu fpv4-sp-d16
 429              	SD_Init:
 430              	.LFB138:
 163:Core/Src/sd.c **** 
 164:Core/Src/sd.c **** UINT8 SD_Init(void)
 165:Core/Src/sd.c **** {
 431              		.loc 1 165 1 view -0
 432              		.cfi_startproc
 433              		@ args = 0, pretend = 0, frame = 8
 434              		@ frame_needed = 0, uses_anonymous_args = 0
 435 0000 10B5     		push	{r4, lr}
 436              	.LCFI8:
 437              		.cfi_def_cfa_offset 8
 438              		.cfi_offset 4, -8
 439              		.cfi_offset 14, -4
 440 0002 82B0     		sub	sp, sp, #8
 441              	.LCFI9:
 442              		.cfi_def_cfa_offset 16
 166:Core/Src/sd.c ****     //__R1_Res_Status res;
 167:Core/Src/sd.c ****     UINT8 res;
 443              		.loc 1 167 5 view .LVU94
 168:Core/Src/sd.c **** 
 169:Core/Src/sd.c ****     /*Pull up MOSI and CS voltage high in at least 74 clock*/
 170:Core/Src/sd.c ****     CS_HIGH();
 444              		.loc 1 170 5 view .LVU95
 445 0004 0122     		movs	r2, #1
 446 0006 4FF48051 		mov	r1, #4096
 447 000a 2548     		ldr	r0, .L46
 448 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 449              	.LVL42:
 450              		.loc 1 170 14 view .LVU96
 171:Core/Src/sd.c ****     for (int i = 0; i < 10; i++)
 451              		.loc 1 171 5 view .LVU97
 452              	.LBB2:
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 12


 453              		.loc 1 171 10 view .LVU98
 454              		.loc 1 171 14 is_stmt 0 view .LVU99
 455 0010 0024     		movs	r4, #0
 456              		.loc 1 171 5 view .LVU100
 457 0012 03E0     		b	.L37
 458              	.LVL43:
 459              	.L38:
 172:Core/Src/sd.c ****     {
 173:Core/Src/sd.c ****         /*send at least 80 dummy byte*/
 174:Core/Src/sd.c ****         xchg_byte(0xFF);
 460              		.loc 1 174 9 is_stmt 1 discriminator 3 view .LVU101
 461 0014 FF20     		movs	r0, #255
 462 0016 FFF7FEFF 		bl	xchg_byte
 463              	.LVL44:
 171:Core/Src/sd.c ****     for (int i = 0; i < 10; i++)
 464              		.loc 1 171 29 discriminator 3 view .LVU102
 171:Core/Src/sd.c ****     for (int i = 0; i < 10; i++)
 465              		.loc 1 171 30 is_stmt 0 discriminator 3 view .LVU103
 466 001a 0134     		adds	r4, r4, #1
 467              	.LVL45:
 468              	.L37:
 171:Core/Src/sd.c ****     for (int i = 0; i < 10; i++)
 469              		.loc 1 171 21 is_stmt 1 discriminator 1 view .LVU104
 171:Core/Src/sd.c ****     for (int i = 0; i < 10; i++)
 470              		.loc 1 171 5 is_stmt 0 discriminator 1 view .LVU105
 471 001c 092C     		cmp	r4, #9
 472 001e F9DD     		ble	.L38
 473              	.LBE2:
 175:Core/Src/sd.c ****     }
 176:Core/Src/sd.c ****     /*[temp] Test code for sending CMD0*/
 177:Core/Src/sd.c **** 
 178:Core/Src/sd.c ****     CS_HIGH();
 474              		.loc 1 178 5 is_stmt 1 view .LVU106
 475 0020 1F4C     		ldr	r4, .L46
 476              	.LVL46:
 477              		.loc 1 178 5 is_stmt 0 view .LVU107
 478 0022 0122     		movs	r2, #1
 479 0024 4FF48051 		mov	r1, #4096
 480 0028 2046     		mov	r0, r4
 481 002a FFF7FEFF 		bl	HAL_GPIO_WritePin
 482              	.LVL47:
 483              		.loc 1 178 14 is_stmt 1 view .LVU108
 179:Core/Src/sd.c ****     xchg_byte(0xFF);
 484              		.loc 1 179 5 view .LVU109
 485 002e FF20     		movs	r0, #255
 486 0030 FFF7FEFF 		bl	xchg_byte
 487              	.LVL48:
 180:Core/Src/sd.c **** 
 181:Core/Src/sd.c ****     /*send cmd0*/
 182:Core/Src/sd.c ****     /*set CS low*/
 183:Core/Src/sd.c ****     CS_LOW();
 488              		.loc 1 183 5 view .LVU110
 489 0034 0022     		movs	r2, #0
 490 0036 4FF48051 		mov	r1, #4096
 491 003a 2046     		mov	r0, r4
 492 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 493              	.LVL49:
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 13


 494              		.loc 1 183 13 view .LVU111
 184:Core/Src/sd.c ****     xchg_byte(0xFF);
 495              		.loc 1 184 5 view .LVU112
 496 0040 FF20     		movs	r0, #255
 497 0042 FFF7FEFF 		bl	xchg_byte
 498              	.LVL50:
 185:Core/Src/sd.c ****     /*Wait for sd card status ready*/
 186:Core/Src/sd.c ****     UINT16 timeout = 0XFFF;
 499              		.loc 1 186 5 view .LVU113
 500              		.loc 1 186 12 is_stmt 0 view .LVU114
 501 0046 40F6FF74 		movw	r4, #4095
 502              	.LVL51:
 503              	.L40:
 187:Core/Src/sd.c ****     do
 504              		.loc 1 187 5 is_stmt 1 discriminator 2 view .LVU115
 188:Core/Src/sd.c ****     {
 189:Core/Src/sd.c ****         res = xchg_byte(0xFF);
 505              		.loc 1 189 9 discriminator 2 view .LVU116
 506              		.loc 1 189 15 is_stmt 0 discriminator 2 view .LVU117
 507 004a FF20     		movs	r0, #255
 508 004c FFF7FEFF 		bl	xchg_byte
 509              	.LVL52:
 190:Core/Src/sd.c ****     } while (--timeout && (res != 0xFF));
 510              		.loc 1 190 13 is_stmt 1 discriminator 2 view .LVU118
 511              		.loc 1 190 5 is_stmt 0 discriminator 2 view .LVU119
 512 0050 013C     		subs	r4, r4, #1
 513              	.LVL53:
 514              		.loc 1 190 5 discriminator 2 view .LVU120
 515 0052 A4B2     		uxth	r4, r4
 516              	.LVL54:
 517              		.loc 1 190 5 discriminator 2 view .LVU121
 518 0054 0CB1     		cbz	r4, .L39
 519              		.loc 1 190 24 discriminator 1 view .LVU122
 520 0056 FF28     		cmp	r0, #255
 521 0058 F7D1     		bne	.L40
 522              	.L39:
 191:Core/Src/sd.c **** 
 192:Core/Src/sd.c ****     if (res != 0xFF)
 523              		.loc 1 192 5 is_stmt 1 view .LVU123
 524              		.loc 1 192 8 is_stmt 0 view .LVU124
 525 005a FF28     		cmp	r0, #255
 526 005c 1ED1     		bne	.L41
 193:Core/Src/sd.c ****     {
 194:Core/Src/sd.c ****         return res;
 195:Core/Src/sd.c ****     }
 196:Core/Src/sd.c **** 
 197:Core/Src/sd.c ****     /*send cmd0*/
 198:Core/Src/sd.c **** 
 199:Core/Src/sd.c ****     UINT8 cmd_bus[6] = {0};
 527              		.loc 1 199 5 is_stmt 1 view .LVU125
 528              		.loc 1 199 11 is_stmt 0 view .LVU126
 529 005e 0024     		movs	r4, #0
 530              	.LVL55:
 531              		.loc 1 199 11 view .LVU127
 532 0060 0094     		str	r4, [sp]
 533 0062 ADF80440 		strh	r4, [sp, #4]	@ movhi
 200:Core/Src/sd.c ****     cmd_bus[0] = CMD0 | 0x40;
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 14


 534              		.loc 1 200 5 is_stmt 1 view .LVU128
 535              		.loc 1 200 16 is_stmt 0 view .LVU129
 536 0066 4023     		movs	r3, #64
 537 0068 8DF80030 		strb	r3, [sp]
 201:Core/Src/sd.c ****     cmd_bus[1] = 0;
 538              		.loc 1 201 5 is_stmt 1 view .LVU130
 202:Core/Src/sd.c ****     cmd_bus[2] = 0;
 539              		.loc 1 202 5 view .LVU131
 203:Core/Src/sd.c ****     cmd_bus[3] = 0;
 540              		.loc 1 203 5 view .LVU132
 204:Core/Src/sd.c ****     cmd_bus[4] = 0;
 541              		.loc 1 204 5 view .LVU133
 205:Core/Src/sd.c ****     cmd_bus[5] = 0x95;
 542              		.loc 1 205 5 view .LVU134
 543              		.loc 1 205 16 is_stmt 0 view .LVU135
 544 006c 9523     		movs	r3, #149
 545 006e 8DF80530 		strb	r3, [sp, #5]
 206:Core/Src/sd.c **** 
 207:Core/Src/sd.c ****     for (int i = 0; i < 6; i++)
 546              		.loc 1 207 5 is_stmt 1 view .LVU136
 547              	.LBB3:
 548              		.loc 1 207 10 view .LVU137
 549              	.LVL56:
 550              		.loc 1 207 5 is_stmt 0 view .LVU138
 551 0072 06E0     		b	.L42
 552              	.LVL57:
 553              	.L43:
 208:Core/Src/sd.c ****     {
 209:Core/Src/sd.c ****         xchg_byte(cmd_bus[i]);
 554              		.loc 1 209 9 is_stmt 1 discriminator 3 view .LVU139
 555 0074 02AB     		add	r3, sp, #8
 556 0076 2344     		add	r3, r3, r4
 557 0078 13F8080C 		ldrb	r0, [r3, #-8]	@ zero_extendqisi2
 558 007c FFF7FEFF 		bl	xchg_byte
 559              	.LVL58:
 207:Core/Src/sd.c ****     {
 560              		.loc 1 207 28 discriminator 3 view .LVU140
 207:Core/Src/sd.c ****     {
 561              		.loc 1 207 29 is_stmt 0 discriminator 3 view .LVU141
 562 0080 0134     		adds	r4, r4, #1
 563              	.LVL59:
 564              	.L42:
 207:Core/Src/sd.c ****     {
 565              		.loc 1 207 21 is_stmt 1 discriminator 1 view .LVU142
 207:Core/Src/sd.c ****     {
 566              		.loc 1 207 5 is_stmt 0 discriminator 1 view .LVU143
 567 0082 052C     		cmp	r4, #5
 568 0084 F6DD     		ble	.L43
 569              	.LBE3:
 210:Core/Src/sd.c ****     }
 211:Core/Src/sd.c ****     UINT8 cnt;
 212:Core/Src/sd.c ****     cnt = 10;
 570              		.loc 1 212 9 view .LVU144
 571 0086 0A24     		movs	r4, #10
 572              	.LVL60:
 573              	.L44:
 213:Core/Src/sd.c **** 
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 15


 214:Core/Src/sd.c ****     do
 574              		.loc 1 214 5 is_stmt 1 discriminator 2 view .LVU145
 215:Core/Src/sd.c ****     {
 216:Core/Src/sd.c ****         /*Keep setting CS low and MOSI high */
 217:Core/Src/sd.c ****         res = xchg_byte(SD_DUMMY_BYTE);
 575              		.loc 1 217 9 discriminator 2 view .LVU146
 576              		.loc 1 217 15 is_stmt 0 discriminator 2 view .LVU147
 577 0088 FF20     		movs	r0, #255
 578 008a FFF7FEFF 		bl	xchg_byte
 579              	.LVL61:
 218:Core/Src/sd.c ****     } while (--cnt && (res & 0x80));
 580              		.loc 1 218 13 is_stmt 1 discriminator 2 view .LVU148
 581              		.loc 1 218 5 is_stmt 0 discriminator 2 view .LVU149
 582 008e 631E     		subs	r3, r4, #1
 583              	.LVL62:
 584              		.loc 1 218 5 discriminator 2 view .LVU150
 585 0090 13F0FF04 		ands	r4, r3, #255
 586 0094 02D0     		beq	.L41
 587              		.loc 1 218 20 discriminator 1 view .LVU151
 588 0096 10F0800F 		tst	r0, #128
 589 009a F5D1     		bne	.L44
 590              	.LVL63:
 591              	.L41:
 219:Core/Src/sd.c **** 
 220:Core/Src/sd.c ****     return res;
 221:Core/Src/sd.c ****     /*[temp]*/
 222:Core/Src/sd.c **** 
 223:Core/Src/sd.c ****     // res = SD_GoIdleState();
 224:Core/Src/sd.c ****     // return res;
 225:Core/Src/sd.c **** }
 592              		.loc 1 225 1 view .LVU152
 593 009c 02B0     		add	sp, sp, #8
 594              	.LCFI10:
 595              		.cfi_def_cfa_offset 8
 596              		@ sp needed
 597 009e 10BD     		pop	{r4, pc}
 598              	.L47:
 599              		.align	2
 600              	.L46:
 601 00a0 00040048 		.word	1207960576
 602              		.cfi_endproc
 603              	.LFE138:
 605              		.text
 606              	.Letext0:
 607              		.file 2 "d:\\msys64\\mingw64\\arm-none-eabi\\include\\machine\\_default_types.h"
 608              		.file 3 "d:\\msys64\\mingw64\\arm-none-eabi\\include\\sys\\_stdint.h"
 609              		.file 4 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g431xx.h"
 610              		.file 5 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 611              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_gpio.h"
 612              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 613              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_spi.h"
 614              		.file 9 "Core/Inc/sd.h"
 615              		.file 10 "Core/Inc/main.h"
ARM GAS  C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s 			page 16


DEFINED SYMBOLS
                            *ABS*:0000000000000000 sd.c
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:18     .text.xchg_byte:0000000000000000 $t
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:26     .text.xchg_byte:0000000000000000 xchg_byte
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:68     .text.xchg_byte:0000000000000028 $d
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:73     .text.sd_wait_ready:0000000000000000 $t
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:80     .text.sd_wait_ready:0000000000000000 sd_wait_ready
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:132    .text.sd_deselect:0000000000000000 $t
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:139    .text.sd_deselect:0000000000000000 sd_deselect
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:166    .text.sd_deselect:0000000000000018 $d
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:171    .text.sd_select:0000000000000000 $t
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:178    .text.sd_select:0000000000000000 sd_select
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:223    .text.sd_select:0000000000000028 $d
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:228    .text.send_cmd:0000000000000000 $t
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:234    .text.send_cmd:0000000000000000 send_cmd
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:361    .text.SD_GoIdleState:0000000000000000 $t
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:368    .text.SD_GoIdleState:0000000000000000 SD_GoIdleState
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:417    .text.SD_GoIdleState:0000000000000028 $d
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:422    .text.SD_Init:0000000000000000 $t
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:429    .text.SD_Init:0000000000000000 SD_Init
C:\Users\Falle\AppData\Local\Temp\ccKXeHRc.s:601    .text.SD_Init:00000000000000a0 $d

UNDEFINED SYMBOLS
HAL_SPI_TransmitReceive
hspi2
HAL_GPIO_WritePin
